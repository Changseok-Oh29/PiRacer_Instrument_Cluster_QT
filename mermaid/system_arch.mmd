graph TD
    subgraph "Host PC"
        direction LR
        A["<i class='fas fa-laptop-code'></i> Qt Creator Project"] -- Cross-Compile --> B["<i class='fas fa-cogs'></i> Executable File"]
    end

    subgraph "Hardware"
        direction LR
        C["<i class='fas fa-gamepad'></i> Wireless Controller"] -- "2.4GHz RF" --> M["<i class='fab fa-usb'></i> USB Dongle"]
        D["<i class='fas fa-tachometer-alt'></i> Speed Sensor"] -- Interrupt Pulse --> E["<i class='fab fa-arduino'></i> Arduino"]
        E -- "<i class='fas fa-microchip'></i> SPI" --> K["MCP2515<br/>(CAN Controller)"]
        K -- "CAN Frame (Speed Data)" --> F(("<i class='fas fa-bus'></i> CAN Bus"))
        L["<i class='fas fa-battery-half'></i> INA219<br/>(Battery Monitor)"]
    end

    subgraph "Raspberry Pi (Target PC)"
        direction TB
        subgraph "Background Services"
            direction LR
            N["<i class='fab fa-python'></i> Input Service"] -- Controller Events --> I
            H["<i class='fab fa-python'></i> Power Service"] -- Power Status --> I(("<i class='fas fa-route'></i> D-Bus"))
        end

        G["<i class='fab fa-raspberry-pi'></i> <b>Qt Application</b> (GUI)"]
        J["<i class='fas fa-tv'></i> Dashboard Display"]

        B -.-> |"<i class='fas fa-file-upload'></i> scp"| G
        M -- "USB HID Events" --> N
        L -- "I2C Bus (Power Data)" --> H
        F -- "<i class='fas fa-network-wired'></i> SocketCAN API" --> G
        I -- "D-Bus Signal Subscription" --> G
        G -- Renders --> J
    end

    %% Styling
    classDef dev fill:#ede7f6,stroke:#5e35b1,stroke-width:2px,color:#212121;
    classDef hardware fill:#eceff1,stroke:#546e7a,stroke-width:2px,color:#212121;
    classDef service fill:#e0f7fa,stroke:#00838f,stroke-width:2px,color:#212121;
    classDef app fill:#fff8e1,stroke:#fbc02d,stroke-width:3px,color:#424242;

    class A,B dev;
    class C,D,E,F,K,L,M hardware;
    class H,I,N service;
    class G,J app;